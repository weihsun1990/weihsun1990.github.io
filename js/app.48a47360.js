(function(){"use strict";var e={7260:function(e,t,n){var o=n(7195),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],s={name:"App"},a=s,l=n(1001),c=(0,l.Z)(a,r,i,!1,null,null,null),p=c.exports,d=n(2241),u=function(){var e=this,t=e._self._c;return t("div",[e.linkContent?e._e():t("div",{staticClass:"note"},[e._v(" 在 "+e._s(e.localUrl)+" 後輸入任意字串，產生 link： ")]),e.linkContent?e._e():t("div",{staticClass:"note-link"},[e._v(" demo://test-link/${input_str} ")]),e.linkContent?t("div",{staticClass:"note-link"},[e._v(" "+e._s(`${e.schema}${e.linkContent}`)+" ")]):e._e()])},h=[],f=(n(6229),n(7330),n(2062),n(7658),n(1439),n(7585),n(5315),n(306)),g=e=>{const t=e?f.Z.create(e):f.Z.create();return t.interceptors.request.use((e=>e),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>Promise.reject(e))),t},m=n(4605),w=n.n(m),b=(()=>({get(){let e=new(w()),t=e.getResult();return t}}))();const v=(()=>{function e(e,t){const n=document.createElement("canvas"),o=n.getContext("2d");o.font=t;const r=o.measureText(e);return r.width}return{getFonts(){const t=[],n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(let o=0;o<n.length;o++){let r=n[o]+" font",i=e(n[o],r);t.push({font:r,width:i})}return t},getLanguage(){return navigator.language||navigator.userLanguage},getScreenSize(){return{width:window.screen.width,height:window.screen.height}}}})(),k=g(),y=()=>k.get("https://api.ipify.org?format=json").then((e=>e.data.ip));var A=(()=>({get(){return Promise.all([y()]).then((e=>{const t=e[0];let n={};t&&(n.ip=t);const o=b.get();return o.language=v.getLanguage(),o.screenSize=v.getScreenSize(),n={...o,...n},n})).catch((e=>{console.error(e)}))},toSHA256(e){const t=(new TextEncoder).encode(JSON.stringify(e));return window.crypto.subtle.digest("SHA-256",t).then((e=>{const t=Array.from(new Uint8Array(e)),n=t.map((e=>e.toString(16).padStart(2,"0"))).join("");return n}))},platform(){const e=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":"web"},testFilter(e){const t={};return e.os&&e.os.name&&(t.os={name:e.os.name}),t}}))(),S={name:"Link",data(){return{schema:"demo://test-link/",linkContent:"",localUrl:""}},created(){const e=new URL(window.location.href);this.localUrl=`${e.protocol}//${e.host}/#/link/`,this.linkContent=`${window.location.href}`.replace(this.localUrl,""),this.linkContent&&(window.onload=()=>{this.toAppLink()})},methods:{toAppLink(){let e="",t=2e3;A.platform();"ios"===this.platform?(e="https://apps.apple.com/tw/app/國泰人壽/id432046643",t*=2):"android"===this.platform&&(e="https://play.google.com/store/apps/details?id=com.cathay.main&hl=zh_TW&gl=US"),window.location=`${this.schema}${this.linkContent}`,e&&setTimeout((function(){window.location=e}),t)}}},_=S,L=(0,l.Z)(_,u,h,!1,null,"52de8bc2",null),C=L.exports,O=function(){var e=this,t=e._self._c;return t("div",[e.message?t("span",[e._v(e._s(e.message))]):e._e()])},x=[],F={name:"Access",data(){return{platform:"",linkContent:"",message:""}},created(){this.platform=A.platform()},mounted(){let e={},t="";A.get().then((t=>(e=A.testFilter(t),A.toSHA256(e)))).then((e=>{t=e,this.message=t;const n=this.mockDbQuery(this.message);this.toAppScript(n)}))},methods:{toAppScript(e){"ios"===this.platform&&window.webkit&&window.webkit.messageHandler.getAppLink.postMessage(e),"android"===this.platform&&window.Android&&window.Android.getAppLink(e)},mockDbQuery(e){const t={"3e23e182f6610757be5a6fdb81ed150362a573f13ca3a22c79f19ac50b3ae3c2":"/pageA","1b1bbc2aa37f17be15edbe657b3657b0f9912cec509ac922a3ddeeb1445d8ef4":"/pageB"};return t[e]||""}}},P=F,Z=(0,l.Z)(P,O,x,!1,null,null,null),H=Z.exports,T=function(){var e=this,t=e._self._c;return t("div",[e.message?t("span",[e._v(e._s(e.message))]):e._e()])},j=[],$={name:"Agent",data(){return{platform:"",linkContent:"",message:""}},created(){this.platform=A.platform()},mounted(){let e={},t="";A.get().then((t=>(e=A.testFilter(t),A.toSHA256(e)))).then((n=>{t=n,this.message=JSON.stringify({agent:e,hash:t}),this.toAppScript(this.message)}))},methods:{toAppScript(e){const t=e||"EMPTY";"ios"===this.platform&&window.webkit&&window.webkit.messageHandler.getAppLink.postMessage(t),"android"===this.platform&&window.Android&&window.Android.getAppLink(t)}}},z=$,B=(0,l.Z)(z,T,j,!1,null,null,null),D=B.exports,U=function(){var e=this,t=e._self._c;return t("div",[e.display?t("div",[e._v(e._s(e.display))]):e._e(),t("br"),t("button",{attrs:{type:"button"},on:{click:e.showHash}},[e._v("Show hash")]),t("button",{attrs:{type:"button"},on:{click:e.showAll}},[e._v("Show all")]),t("button",{attrs:{type:"button"},on:{click:e.showFilter}},[e._v("Show filter")])])},I=[],J={name:"Fingerprint",data(){return{fpid:"",fpc:[],display:""}},created(){},mounted(){window.requestIdleCallback?requestIdleCallback((()=>{this.doPrompt()})):setTimeout((()=>{this.doPrompt()}),500)},methods:{doPrompt(){Fingerprint2.get((e=>{this.fpc=e.filter((e=>!["canvas","webgl"].some((t=>t===e.key)))),this.$firestore.create("fingerprint",{data:JSON.stringify(this.fingerpirntMap)});const t=this.filterFpc.map((e=>e.value));this.fpid=Fingerprint2.x64hash128(t.join(""),31),this.showHash(),this.toAppScript(JSON.stringify(this.fpid))}))},toAppScript(e){const t=A.platform();"ios"===t&&window.webkit&&window.webkit.messageHandler.getAppLink.postMessage(e),"android"===t&&window.Android&&window.Android.getAppLink(e)},showHash(){this.display=this.fpid},showAll(){this.display=JSON.stringify(this.fpc)},showFilter(){this.display=JSON.stringify(this.filterFpc)},mapping(e,t){const n=[];return e.forEach((e=>{const o=t.find((t=>t.key===e.key));o&&o.value===e.value&&n.push(e)})),n}},computed:{fingerpirntMap(){return this.fpc.reduce(((e,t)=>(e[t.key]=t.value,e)),{})},filterFpc(){const e=this.allFilter;return this.fpc.filter((t=>e.some((e=>e===t.key))))},iosFilter(){return["webdriver","language","hardwareConcurrency","timezoneOffset","timezone","sessionStorage","localStorage","indexedDb","addBehavior","cpuClass","platform","hasLiedLanguages","hasLiedResolution","hasLiedOs","hasLiedBrowser"]},androidFilter(){return["webdriver","colorDepth","hardwareConcurrency","timezoneOffset","timezone","sessionStorage","indexedDb","addBehavior","cpuClass","hasLiedLanguages","hasLiedResolution","hasLiedOs","hasLiedBrowser"]},allFilter(){return["webdriver","hardwareConcurrency","timezoneOffset","timezone","sessionStorage","indexedDb","addBehavior","cpuClass","hasLiedLanguages","hasLiedResolution","hasLiedOs","hasLiedBrowser"]}}},E=J,M=(0,l.Z)(E,U,I,!1,null,"0be93743",null),N=M.exports,R=[{path:"/"},{path:"/link/:param(.*)",name:"Param",component:C},{path:"/access",name:"Access",component:H},{path:"/agent",name:"Agent",component:D},{path:"/fingerprint",name:"Fingerprint",component:N}],Q=n(5467),q=n(2248),G=n(5368);const Y={apiKey:"AIzaSyAGuHdtZxu0lJSBByHx_NOQ1cEH5HbaLg8",authDomain:"playground-fcl.firebaseapp.com",databaseURL:"https://playground-fcl-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"playground-fcl",storageBucket:"playground-fcl.appspot.com",messagingSenderId:"264181263286",appId:"1:264181263286:web:67c0c951469ed7212daf17",measurementId:"G-QXG4D821YS"},K=(0,Q.ZF)(Y),W=((0,q.IH)(K),(0,G.ad)(K)),X=(()=>({create:(e,t)=>{const n={createTime:new Date,...t};return(0,G.ET)((0,G.hJ)(W,e),n)},read:e=>(0,G.PL)((0,G.hJ)(W,e))}))();o.ZP.prototype.$firestore=X,o.ZP.prototype.$setCookie=function(e,t){const n=new Date;n.setTime(n.getTime()+864e5);let o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"},o.ZP.prototype.$getCookie=function(e){let t=e+"=",n=decodeURIComponent(document.cookie),o=n.split(";");for(let r=0;r<o.length;r++){let e=o[r];while(" "==e.charAt(0))e=e.substring(1);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return""},o.ZP.config.productionTip=!1;const V=new d.ZP({mode:"hash",routes:R});o.ZP.use(d.ZP),new o.ZP({router:V,render:e=>e(p)}).$mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,o,r,i){if(!o){var s=1/0;for(p=0;p<e.length;p++){o=e[p][0],r=e[p][1],i=e[p][2];for(var a=!0,l=0;l<o.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(p--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[o,r,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,s=o[0],a=o[1],l=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)var p=l(n)}for(t&&t(o);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(p)},o=self["webpackChunkapp_link"]=self["webpackChunkapp_link"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7260)}));o=n.O(o)})();
//# sourceMappingURL=app.48a47360.js.map